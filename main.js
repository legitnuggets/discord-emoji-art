(()=>{"use strict";function e(e){if("string"!=typeof e||!e)throw new Error("expected a non-empty string, got: "+e)}function t(e){if("number"!=typeof e)throw new Error("expected a number, got: "+e)}const n="emoji",o="keyvalue",i="favorites",r="tokens",a="count",s="group-order",c="eTag",l="url",d="skinTone",u="readonly",f="readwrite",m="skinUnicodes";function h(e){return function(e,t){const n=new Set,o=[];for(const t of e){const e=t.unicode;n.has(e)||(n.add(e),o.push(t))}return o}(e)}const p={},g={},b={};function y(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(new Error("IDB blocked")),n.onsuccess=()=>e(n.result)}function v(e,t,n,o){return new Promise(((i,r)=>{const a=e.transaction(t,n,{durability:"relaxed"}),s="string"==typeof t?a.objectStore(t):t.map((e=>a.objectStore(e)));let c;o(s,a,(e=>{c=e})),a.oncomplete=()=>i(c),a.onerror=()=>r(a.error)}))}function w(e){const t=p[e],n=t&&t.result;if(n){n.close();const t=b[e];if(t)for(const e of t)e()}delete p[e],delete g[e],delete b[e]}const k=new Set([":D","xD",":'D","o:)",":x",":p",";p","xp",":l",":z",":j","8D","xo","8)",":B",":o",":s",":'o","Dx","x(","D:",":c",">0)",":3","</3","<3","\\m/",":E","8#"]);function j(e){return e.split(/[\s_]+/).map((e=>!e.match(/\w/)||k.has(e)?e.toLowerCase():e.replace(/[)(:,]/g,"").replace(/’/g,"'").toLowerCase())).filter(Boolean)}function $(e){return e.filter(Boolean).map((e=>e.toLowerCase())).filter((e=>e.length>=2))}function x(e,t,n,o){e[t](n).onsuccess=e=>o&&o(e.target.result)}function E(e,t,n){x(e,"get",t,n)}function _(e,t,n){x(e,"getAll",t,n)}function S(e){e.commit&&e.commit()}function L(e,t){const n=function(e,t){let n=e[0];for(let o=1;o<e.length;o++){const i=e[o];t(n)>t(i)&&(n=i)}return n}(e,(e=>e.length)),o=[];for(const i of n)e.some((e=>-1===e.findIndex((e=>t(e)===t(i)))))||o.push(i);return o}async function C(e,t,i,r){try{const a=function(e){return e.map((({annotation:e,emoticon:t,group:n,order:o,shortcodes:i,skins:r,tags:a,emoji:s,version:c})=>{const l=[...new Set($([...(i||[]).map(j).flat(),...a.map(j).flat(),...j(e),t]))].sort(),d={annotation:e,group:n,order:o,tags:a,tokens:l,unicode:s,version:c};if(t&&(d.emoticon=t),i&&(d.shortcodes=i),r){d.skinTones=[],d.skinUnicodes=[],d.skinVersions=[];for(const{tone:e,emoji:t,version:n}of r)d.skinTones.push(e),d.skinUnicodes.push(t),d.skinVersions.push(n)}return d}))}(t);await v(e,[n,o],f,(([e,t],n)=>{let o,s,d=0;function u(){2==++d&&function(){if(o!==r||s!==i){e.clear();for(const t of a)e.put(t);t.put(r,c),t.put(i,l),S(n)}}()}E(t,c,(e=>{o=e,u()})),E(t,l,(e=>{s=e,u()}))}))}finally{}}async function T(e,t){const o=$(j(t));return o.length?v(e,n,u,((e,t,n)=>{const i=[],a=()=>{const e=L(i,(e=>e.unicode));n(e.sort(((e,t)=>e.order<t.order?-1:1)))};for(let t=0;t<o.length;t++){const n=o[t],s=t===o.length-1?IDBKeyRange.bound(n,n+"￿",!1,!0):IDBKeyRange.only(n);_(e.index(r),s,(e=>{i.push(e),i.length===o.length&&a()}))}})):[]}function z(e,t,n){return v(e,t,u,((e,t,o)=>E(e,n,o)))}const A=["name","url"];function B(e){!function(e){const t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||A.some((t=>!(t in e[0]))));if(!t||n)throw new Error("Custom emojis are in the wrong format")}(e);const t=(e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:1,n=e.sort(t),o=function(e,t){const n=new Map;for(const t of e){const e=[...new Set((t.shortcodes||[]).map((e=>j(e))).flat())];for(const o of e){let e=n;for(let t=0;t<o.length;t++){const n=o.charAt(t);let i=e.get(n);i||(i=new Map,e.set(n,i)),e=i}let i=e.get("");i||(i=[],e.set("",i)),i.push(t)}}return(e,t)=>{let o=n;for(let t=0;t<e.length;t++){const n=e.charAt(t),i=o.get(n);if(!i)return[];o=i}if(t)return o.get("")||[];const i=[],r=[o];for(;r.length;){const e=[...r.shift().entries()].sort(((e,t)=>e[0]<t[0]?-1:1));for(const[t,n]of e)""===t?i.push(...n):r.push(n)}return i}}(e),i=e=>o(e,!0),r=e=>o(e,!1),a=new Map,s=new Map;for(const t of e){s.set(t.name.toLowerCase(),t);for(const e of t.shortcodes||[])a.set(e.toLowerCase(),t)}return{all:n,search:e=>{const n=j(e);return L(n.map(((e,t)=>(t<n.length-1?i:r)(e))),(e=>e.name)).sort(t)},byShortcode:e=>a.get(e.toLowerCase()),byName:e=>s.get(e.toLowerCase())}}function M(e){if(!e)return e;if(delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function D(e){e||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const I=["annotation","emoji","group","order","tags","version"];function P(e,t){if(2!==Math.floor(e.status/100))throw new Error("Failed to fetch: "+t+":  "+e.status)}async function U(e){const t=await fetch(e);P(t,e);const n=t.headers.get("etag");D(n);const o=await t.json();return function(e){if(!e||!Array.isArray(e)||!e[0]||"object"!=typeof e[0]||I.some((t=>!(t in e[0]))))throw new Error("Emoji data is in the wrong format")}(o),[n,o]}async function R(e){const t=function(e){for(var t=e.length,n=new ArrayBuffer(t),o=new Uint8Array(n),i=-1;++i<t;)o[i]=e.charCodeAt(i);return n}(JSON.stringify(e)),n=function(e){for(var t="",n=new Uint8Array(e),o=n.byteLength,i=-1;++i<o;)t+=String.fromCharCode(n[i]);return t}(await crypto.subtle.digest("SHA-1",t));return btoa(n)}function O(){}function N(e){return e()}function F(){return Object.create(null)}function q(e){e.forEach(N)}function H(e){return"function"==typeof e}function V(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let K,W;function Y(e,t){return K||(K=document.createElement("a")),K.href=t,e===K.href}function G(e,t){e.appendChild(t)}function Q(e,t,n){e.insertBefore(t,n||null)}function X(e){e.parentNode.removeChild(e)}function J(e){return document.createElement(e)}function Z(e){return document.createTextNode(e)}function ee(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function te(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ne(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function oe(e,t){e.value=null==t?"":t}function ie(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}function re(e){W=e}const ae=[],se=[],ce=[],le=[],de=Promise.resolve();let ue=!1;function fe(){ue||(ue=!0,de.then(ge))}function me(e){ce.push(e)}let he=!1;const pe=new Set;function ge(){if(!he){he=!0;do{for(let e=0;e<ae.length;e+=1){const t=ae[e];re(t),be(t.$$)}for(re(null),ae.length=0;se.length;)se.pop()();for(let e=0;e<ce.length;e+=1){const t=ce[e];pe.has(t)||(pe.add(t),t())}ce.length=0}while(ae.length);for(;le.length;)le.pop()();ue=!1,he=!1,pe.clear()}}function be(e){if(null!==e.fragment){e.update(),q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(me)}}const ye=new Set;function ve(e,t){e&&e.i&&(ye.delete(e),e.i(t))}const we="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ke(e,t){e.d(1),t.delete(e.key)}function je(e,t,n,o,i,r,a,s,c,l,d,u){let f=e.length,m=r.length,h=f;const p={};for(;h--;)p[e[h].key]=h;const g=[],b=new Map,y=new Map;for(h=m;h--;){const e=u(i,r,h),s=n(e);let c=a.get(s);c?o&&c.p(e,t):(c=l(s,e),c.c()),b.set(s,g[h]=c),s in p&&y.set(s,Math.abs(h-p[s]))}const v=new Set,w=new Set;function k(e){ve(e,1),e.m(s,d),a.set(e.key,e),d=e.first,m--}for(;f&&m;){const t=g[m-1],n=e[f-1],o=t.key,i=n.key;t===n?(d=t.first,f--,m--):b.has(i)?!a.has(o)||v.has(o)?k(t):w.has(i)?f--:y.get(o)>y.get(i)?(w.add(o),k(t)):(v.add(i),f--):(c(n,a),f--)}for(;f--;){const t=e[f];b.has(t.key)||c(t,a)}for(;m;)k(g[m-1]);return g}const $e=[[-1,"✨","custom"],[0,"😀","smileys-emotion"],[1,"👋","people-body"],[3,"🐱","animals-nature"],[4,"🍎","food-drink"],[5,"🏠️","travel-places"],[6,"⚽","activities"],[7,"📝","objects"],[8,"⛔️","symbols"],[9,"🏁","flags"]].map((([e,t,n])=>({id:e,emoji:t,name:n}))),xe=$e.slice(1),Ee=$e[0],_e="function"==typeof requestIdleCallback?requestIdleCallback:setTimeout;function Se(e){return e.unicode.includes("‍")}const Le={"🥲":13.1,"🥻":12.1,"🥰":11,"🤩":5,"👱‍♀️":4,"🤣":3,"👁️‍🗨️":2,"😀":1,"😐️":.7,"😃":.6},Ce=["😊","😒","♥️","👍️","😍","😂","😭","☺️","😔","😩","😏","💕","🙌","😘"],Te='"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Twemoji Mozilla","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',ze=(e,t)=>e<t?-1:e>t?1:0,Ae=(e,t)=>{const n=document.createElement("canvas");n.width=n.height=1;const o=n.getContext("2d");return o.textBaseline="top",o.font=`100px ${Te}`,o.fillStyle=t,o.scale(.01,.01),o.fillText(e,0,0),o.getImageData(0,0,1,1).data};function Be(e){const t=Ae(e,"#000"),n=Ae(e,"#fff");return t&&n&&((e,t)=>{const n=[...e].join(",");return n===[...t].join(",")&&!n.startsWith("0,0,0,")})(t,n)}const Me=new Promise((e=>_e((()=>e(function(){const e=Object.entries(Le);try{for(const[t,n]of e)if(Be(t))return n}catch(e){}return e[0][1]}()))))),De=new Map;function Ie(e){e.preventDefault(),e.stopPropagation()}function Pe(e,t,n){return(t+=e?-1:1)<0?t=n.length-1:t>=n.length&&(t=0),t}function Ue(e,t){const n=new Set,o=[];for(const i of e){const e=t(i);n.has(e)||(n.add(e),o.push(i))}return o}const Re=requestAnimationFrame;let Oe,Ne="function"==typeof ResizeObserver;function Fe(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}const{Map:qe}=we;function He(e,t,n){const o=e.slice();return o[63]=t[n],o[65]=n,o}function Ve(e,t,n){const o=e.slice();return o[66]=t[n],o[65]=n,o}function Ke(e,t,n){const o=e.slice();return o[63]=t[n],o[65]=n,o}function We(e,t,n){const o=e.slice();return o[69]=t[n],o}function Ye(e,t,n){const o=e.slice();return o[72]=t[n],o[65]=n,o}function Ge(e,t){let n,o,i,r,a,s,c,l=t[72]+"";return{key:e,first:null,c(){n=J("div"),o=Z(l),te(n,"id",i="skintone-"+t[65]),te(n,"class",r="emoji hide-focus "+(t[65]===t[20]?"active":"")),te(n,"aria-selected",a=t[65]===t[20]),te(n,"role","option"),te(n,"title",s=t[0].skinTones[t[65]]),te(n,"tabindex","-1"),te(n,"aria-label",c=t[0].skinTones[t[65]]),this.first=n},m(e,t){Q(e,n,t),G(n,o)},p(e,d){t=e,512&d[0]&&l!==(l=t[72]+"")&&ne(o,l),512&d[0]&&i!==(i="skintone-"+t[65])&&te(n,"id",i),1049088&d[0]&&r!==(r="emoji hide-focus "+(t[65]===t[20]?"active":""))&&te(n,"class",r),1049088&d[0]&&a!==(a=t[65]===t[20])&&te(n,"aria-selected",a),513&d[0]&&s!==(s=t[0].skinTones[t[65]])&&te(n,"title",s),513&d[0]&&c!==(c=t[0].skinTones[t[65]])&&te(n,"aria-label",c)},d(e){e&&X(n)}}}function Qe(e,t){let n,o,i,r,a,s,c,l,d,u=t[69].emoji+"";function f(){return t[49](t[69])}return{key:e,first:null,c(){n=J("button"),o=J("div"),i=Z(u),te(o,"class","nav-emoji emoji"),te(n,"role","tab"),te(n,"class","nav-button"),te(n,"aria-controls",r="tab-"+t[69].id),te(n,"aria-label",a=t[0].categories[t[69].name]),te(n,"aria-selected",s=!t[4]&&t[13].id===t[69].id),te(n,"title",c=t[0].categories[t[69].name]),this.first=n},m(e,t){Q(e,n,t),G(n,o),G(o,i),l||(d=ee(n,"click",f),l=!0)},p(e,o){t=e,4096&o[0]&&u!==(u=t[69].emoji+"")&&ne(i,u),4096&o[0]&&r!==(r="tab-"+t[69].id)&&te(n,"aria-controls",r),4097&o[0]&&a!==(a=t[0].categories[t[69].name])&&te(n,"aria-label",a),12304&o[0]&&s!==(s=!t[4]&&t[13].id===t[69].id)&&te(n,"aria-selected",s),4097&o[0]&&c!==(c=t[0].categories[t[69].name])&&te(n,"title",c)},d(e){e&&X(n),l=!1,d()}}}function Xe(e){let t,n;return{c(){t=J("img"),te(t,"class","custom-emoji"),Y(t.src,n=e[63].url)||te(t,"src",n),te(t,"alt",""),te(t,"loading","lazy")},m(e,n){Q(e,t,n)},p(e,o){32768&o[0]&&!Y(t.src,n=e[63].url)&&te(t,"src",n)},d(e){e&&X(t)}}}function Je(e){let t,n=e[27](e[63],e[8])+"";return{c(){t=Z(n)},m(e,n){Q(e,t,n)},p(e,o){33024&o[0]&&n!==(n=e[27](e[63],e[8])+"")&&ne(t,n)},d(e){e&&X(t)}}}function Ze(e,t){let n,o,i,r,a,s,c;function l(e,t){return e[63].unicode?Je:Xe}let d=l(t),u=d(t);return{key:e,first:null,c(){n=J("button"),u.c(),te(n,"role",o=t[4]?"option":"menuitem"),te(n,"aria-selected",i=t[4]?t[65]==t[5]:""),te(n,"aria-label",r=t[28](t[63],t[8])),te(n,"title",a=t[63].title),te(n,"class",s="emoji "+(t[4]&&t[65]===t[5]?"active":"")),te(n,"id",c="emo-"+t[63].id),this.first=n},m(e,t){Q(e,n,t),u.m(n,null)},p(e,f){d===(d=l(t=e))&&u?u.p(t,f):(u.d(1),u=d(t),u&&(u.c(),u.m(n,null))),16&f[0]&&o!==(o=t[4]?"option":"menuitem")&&te(n,"role",o),32816&f[0]&&i!==(i=t[4]?t[65]==t[5]:"")&&te(n,"aria-selected",i),33024&f[0]&&r!==(r=t[28](t[63],t[8]))&&te(n,"aria-label",r),32768&f[0]&&a!==(a=t[63].title)&&te(n,"title",a),32816&f[0]&&s!==(s="emoji "+(t[4]&&t[65]===t[5]?"active":""))&&te(n,"class",s),32768&f[0]&&c!==(c="emo-"+t[63].id)&&te(n,"id",c)},d(e){e&&X(n),u.d()}}}function et(e,t){let n,o,i,r,a,s,c,l,d=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"",u=[],f=new qe,m=t[66].emojis;const h=e=>e[63].id;for(let e=0;e<m.length;e+=1){let n=Ke(t,m,e),o=h(n);f.set(o,u[e]=Ze(o,n))}return{key:e,first:null,c(){n=J("div"),o=Z(d),a=J("div");for(let e=0;e<u.length;e+=1)u[e].c();te(n,"id",i="menu-label-"+t[65]),te(n,"class",r="category "+(1===t[15].length&&""===t[15][0].category?"gone":"")),te(n,"aria-hidden","true"),te(a,"class","emoji-menu"),te(a,"role",s=t[4]?"listbox":"menu"),te(a,"aria-labelledby",c="menu-label-"+t[65]),te(a,"id",l=t[4]?"search-results":""),this.first=n},m(e,t){Q(e,n,t),G(n,o),Q(e,a,t);for(let e=0;e<u.length;e+=1)u[e].m(a,null)},p(e,p){t=e,40977&p[0]&&d!==(d=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"")&&ne(o,d),32768&p[0]&&i!==(i="menu-label-"+t[65])&&te(n,"id",i),32768&p[0]&&r!==(r="category "+(1===t[15].length&&""===t[15][0].category?"gone":""))&&te(n,"class",r),402686256&p[0]&&(m=t[66].emojis,u=je(u,p,h,1,t,m,f,a,ke,Ze,null,Ke)),16&p[0]&&s!==(s=t[4]?"listbox":"menu")&&te(a,"role",s),32768&p[0]&&c!==(c="menu-label-"+t[65])&&te(a,"aria-labelledby",c),16&p[0]&&l!==(l=t[4]?"search-results":"")&&te(a,"id",l)},d(e){e&&X(n),e&&X(a);for(let e=0;e<u.length;e+=1)u[e].d()}}}function tt(e){let t,n;return{c(){t=J("img"),te(t,"class","custom-emoji"),Y(t.src,n=e[63].url)||te(t,"src",n),te(t,"alt",""),te(t,"loading","lazy")},m(e,n){Q(e,t,n)},p(e,o){1024&o[0]&&!Y(t.src,n=e[63].url)&&te(t,"src",n)},d(e){e&&X(t)}}}function nt(e){let t,n=e[27](e[63],e[8])+"";return{c(){t=Z(n)},m(e,n){Q(e,t,n)},p(e,o){1280&o[0]&&n!==(n=e[27](e[63],e[8])+"")&&ne(t,n)},d(e){e&&X(t)}}}function ot(e,t){let n,o,i,r;function a(e,t){return e[63].unicode?nt:tt}let s=a(t),c=s(t);return{key:e,first:null,c(){n=J("button"),c.c(),te(n,"role","menuitem"),te(n,"aria-label",o=t[28](t[63],t[8])),te(n,"title",i=t[63].title),te(n,"class","emoji"),te(n,"id",r="fav-"+t[63].id),this.first=n},m(e,t){Q(e,n,t),c.m(n,null)},p(e,l){s===(s=a(t=e))&&c?c.p(t,l):(c.d(1),c=s(t),c&&(c.c(),c.m(n,null))),1280&l[0]&&o!==(o=t[28](t[63],t[8]))&&te(n,"aria-label",o),1024&l[0]&&i!==(i=t[63].title)&&te(n,"title",i),1024&l[0]&&r!==(r="fav-"+t[63].id)&&te(n,"id",r)},d(e){e&&X(n),c.d()}}}function it(e){let t,n,o,i,r,a,s,c,l,d,u,f,m,h,p,g,b,y,v,w,k,j,$,x,E,_,S,L,C,T,z,A,B,M,D,I,P,U,R,N,F,V,K,W,Y=e[0].searchLabel+"",re=e[0].searchDescription+"",ae=e[0].skinToneDescription+"",se=[],ce=new qe,le=[],de=new qe,ue=[],fe=new qe,me=[],he=new qe,pe=e[9];const ge=e=>e[72];for(let t=0;t<pe.length;t+=1){let n=Ye(e,pe,t),o=ge(n);ce.set(o,se[t]=Ge(o,n))}let be=e[12];const ye=e=>e[69].id;for(let t=0;t<be.length;t+=1){let n=We(e,be,t),o=ye(n);de.set(o,le[t]=Qe(o,n))}let ve=e[15];const we=e=>e[66].category;for(let t=0;t<ve.length;t+=1){let n=Ve(e,ve,t),o=we(n);fe.set(o,ue[t]=et(o,n))}let $e=e[10];const xe=e=>e[63].id;for(let t=0;t<$e.length;t+=1){let n=He(e,$e,t),o=xe(n);he.set(o,me[t]=ot(o,n))}return{c(){t=J("section"),n=J("div"),o=J("div"),i=J("div"),r=J("input"),l=J("label"),d=Z(Y),u=J("span"),f=Z(re),m=J("div"),h=J("button"),p=Z(e[21]),y=J("span"),v=Z(ae),w=J("div");for(let e=0;e<se.length;e+=1)se[e].c();E=J("div");for(let e=0;e<le.length;e+=1)le[e].c();S=J("div"),L=J("div"),C=J("div"),T=Z(e[18]),A=J("div"),B=J("div");for(let e=0;e<ue.length;e+=1)ue[e].c();U=J("div");for(let e=0;e<me.length;e+=1)me[e].c();F=J("button"),F.textContent="😀",te(n,"class","pad-top"),te(r,"id","search"),te(r,"class","search"),te(r,"type","search"),te(r,"role","combobox"),te(r,"enterkeyhint","search"),te(r,"placeholder",a=e[0].searchLabel),te(r,"autocapitalize","none"),te(r,"autocomplete","off"),te(r,"spellcheck","true"),te(r,"aria-expanded",s=!(!e[4]||!e[1].length)),te(r,"aria-controls","search-results"),te(r,"aria-owns","search-results"),te(r,"aria-describedby","search-description"),te(r,"aria-autocomplete","list"),te(r,"aria-activedescendant",c=e[26]?`emo-${e[26]}`:""),te(l,"class","sr-only"),te(l,"for","search"),te(u,"id","search-description"),te(u,"class","sr-only"),te(i,"class","search-wrapper"),te(h,"id","skintone-button"),te(h,"class",g="emoji "+(e[6]?"hide-focus":"")),te(h,"aria-label",e[23]),te(h,"title",e[23]),te(h,"aria-describedby","skintone-description"),te(h,"aria-haspopup","listbox"),te(h,"aria-expanded",e[6]),te(h,"aria-controls","skintone-list"),te(m,"class",b="skintone-button-wrapper "+(e[19]?"expanded":"")),te(y,"id","skintone-description"),te(y,"class","sr-only"),te(w,"id","skintone-list"),te(w,"class",k="skintone-list "+(e[6]?"":"hidden no-animate")),ie(w,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),te(w,"role","listbox"),te(w,"aria-label",j=e[0].skinTonesLabel),te(w,"aria-activedescendant",$="skintone-"+e[20]),te(w,"aria-hidden",x=!e[6]),te(o,"class","search-row"),te(E,"class","nav"),te(E,"role","tablist"),ie(E,"grid-template-columns","repeat("+e[12].length+", 1fr)"),te(E,"aria-label",_=e[0].categoriesLabel),te(L,"class","indicator"),ie(L,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),te(S,"class","indicator-wrapper"),te(C,"class",z="message "+(e[18]?"":"gone")),te(C,"role","alert"),te(C,"aria-live","polite"),te(A,"class",M="tabpanel "+(!e[14]||e[18]?"gone":"")),te(A,"role",D=e[4]?"region":"tabpanel"),te(A,"aria-label",I=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name]),te(A,"id",P=e[4]?"":`tab-${e[13].id}`),te(A,"tabindex","0"),te(U,"class",R="favorites emoji-menu "+(e[18]?"gone":"")),te(U,"role","menu"),te(U,"aria-label",N=e[0].favoritesLabel),ie(U,"padding-inline-end",e[25]+"px"),te(F,"aria-hidden","true"),te(F,"tabindex","-1"),te(F,"class","abs-pos hidden emoji"),te(t,"class","picker"),te(t,"aria-label",V=e[0].regionLabel),te(t,"style",e[22])},m(a,s){Q(a,t,s),G(t,n),G(t,o),G(o,i),G(i,r),oe(r,e[2]),G(i,l),G(l,d),G(i,u),G(u,f),G(o,m),G(m,h),G(h,p),G(o,y),G(y,v),G(o,w);for(let e=0;e<se.length;e+=1)se[e].m(w,null);e[48](w),G(t,E);for(let e=0;e<le.length;e+=1)le[e].m(E,null);G(t,S),G(S,L),G(t,C),G(C,T),G(t,A),G(A,B);for(let e=0;e<ue.length;e+=1)ue[e].m(B,null);e[50](A),G(t,U);for(let e=0;e<me.length;e+=1)me[e].m(U,null);var c;G(t,F),e[51](F),e[52](t),K||(W=[ee(r,"input",e[47]),ee(r,"keydown",e[30]),ee(h,"click",e[35]),ee(w,"focusout",e[38]),ee(w,"click",e[34]),ee(w,"keydown",e[36]),ee(w,"keyup",e[37]),ee(E,"keydown",e[32]),(c=e[29].call(null,B),c&&H(c.destroy)?c.destroy:O),ee(A,"click",e[33]),ee(U,"click",e[33])],K=!0)},p(e,n){1&n[0]&&a!==(a=e[0].searchLabel)&&te(r,"placeholder",a),18&n[0]&&s!==(s=!(!e[4]||!e[1].length))&&te(r,"aria-expanded",s),67108864&n[0]&&c!==(c=e[26]?`emo-${e[26]}`:"")&&te(r,"aria-activedescendant",c),4&n[0]&&oe(r,e[2]),1&n[0]&&Y!==(Y=e[0].searchLabel+"")&&ne(d,Y),1&n[0]&&re!==(re=e[0].searchDescription+"")&&ne(f,re),2097152&n[0]&&ne(p,e[21]),64&n[0]&&g!==(g="emoji "+(e[6]?"hide-focus":""))&&te(h,"class",g),8388608&n[0]&&te(h,"aria-label",e[23]),8388608&n[0]&&te(h,"title",e[23]),64&n[0]&&te(h,"aria-expanded",e[6]),524288&n[0]&&b!==(b="skintone-button-wrapper "+(e[19]?"expanded":""))&&te(m,"class",b),1&n[0]&&ae!==(ae=e[0].skinToneDescription+"")&&ne(v,ae),1049089&n[0]&&(pe=e[9],se=je(se,n,ge,1,e,pe,ce,w,ke,Ge,null,Ye)),64&n[0]&&k!==(k="skintone-list "+(e[6]?"":"hidden no-animate"))&&te(w,"class",k),64&n[0]&&ie(w,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),1&n[0]&&j!==(j=e[0].skinTonesLabel)&&te(w,"aria-label",j),1048576&n[0]&&$!==($="skintone-"+e[20])&&te(w,"aria-activedescendant",$),64&n[0]&&x!==(x=!e[6])&&te(w,"aria-hidden",x),12305&n[0]|1&n[1]&&(be=e[12],le=je(le,n,ye,1,e,be,de,E,ke,Qe,null,We)),4096&n[0]&&ie(E,"grid-template-columns","repeat("+e[12].length+", 1fr)"),1&n[0]&&_!==(_=e[0].categoriesLabel)&&te(E,"aria-label",_),16779264&n[0]&&ie(L,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),262144&n[0]&&ne(T,e[18]),262144&n[0]&&z!==(z="message "+(e[18]?"":"gone"))&&te(C,"class",z),402694449&n[0]&&(ve=e[15],ue=je(ue,n,we,1,e,ve,fe,B,ke,et,null,Ve)),278528&n[0]&&M!==(M="tabpanel "+(!e[14]||e[18]?"gone":""))&&te(A,"class",M),16&n[0]&&D!==(D=e[4]?"region":"tabpanel")&&te(A,"role",D),8209&n[0]&&I!==(I=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name])&&te(A,"aria-label",I),8208&n[0]&&P!==(P=e[4]?"":`tab-${e[13].id}`)&&te(A,"id",P),402654464&n[0]&&($e=e[10],me=je(me,n,xe,1,e,$e,he,U,ke,ot,null,He)),262144&n[0]&&R!==(R="favorites emoji-menu "+(e[18]?"gone":""))&&te(U,"class",R),1&n[0]&&N!==(N=e[0].favoritesLabel)&&te(U,"aria-label",N),33554432&n[0]&&ie(U,"padding-inline-end",e[25]+"px"),1&n[0]&&V!==(V=e[0].regionLabel)&&te(t,"aria-label",V),4194304&n[0]&&te(t,"style",e[22])},i:O,o:O,d(n){n&&X(t);for(let e=0;e<se.length;e+=1)se[e].d();e[48](null);for(let e=0;e<le.length;e+=1)le[e].d();for(let e=0;e<ue.length;e+=1)ue[e].d();e[50](null);for(let e=0;e<me.length;e+=1)me[e].d();e[51](null),e[52](null),K=!1,q(W)}}}function rt(e,t,n){let o,i,r,a,s,c,l,d,u,f,{skinToneEmoji:m}=t,{i18n:h}=t,{database:p}=t,{customEmoji:g}=t,{customCategorySorting:b}=t,y=[],v=[],w="",k="",j=!1,$=-1,x=!1,E=!1,_=0,S=0,L="",C=[],T=[],z=8,A=!1,B=0,M=0,D=xe,I=!1;const P=e=>{o.getRootNode().getElementById(e).focus()},U=(e,t)=>{o.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))},R=(e,t)=>t&&e.skins&&e.skins[t]||e.unicode,O=e=>/^skintone-/.test(e.id);function N(e){return!e.unicode||!Se(e)||De.get(e.unicode)}async function F(e){const t=await Me;return e.filter((({version:e})=>!e||e<=t))}async function q(e){return function(e,t){const n=e=>{const n={};for(const o of e)"number"==typeof o.tone&&o.version<=t&&(n[o.tone]=o.unicode);return n};return e.map((({unicode:e,skins:t,shortcodes:o,url:i,name:r,category:a})=>({unicode:e,name:r,shortcodes:o,url:i,category:a,id:e||r,skins:t&&n(t),title:(o||[]).join(", ")})))}(e,await Me)}function H(e){n(2,w=""),n(44,k=""),n(5,$=-1),n(11,M=D.findIndex((t=>t.id===e.id)))}async function V(e){const t=await p.getEmojiByUnicodeOrName(e),n=[...y,...T].find((t=>t.id===e)),o=n.unicode&&R(n,_);await p.incrementFavoriteEmojiCount(e),U("emoji-click",{emoji:t,skinTone:_,...o&&{unicode:o},...n.name&&{name:n.name}})}async function K(e){const{target:t}=e;if(!O(t))return;Ie(e);const o=parseInt(t.id.slice(9),10);n(8,_=o),n(6,x=!1),P("skintone-button"),U("skin-tone-change",{skinTone:o}),p.setPreferredSkinTone(o)}return Me.then((e=>{e||n(18,a=h.emojiUnsupportedMessage)})),e.$$set=e=>{"skinToneEmoji"in e&&n(40,m=e.skinToneEmoji),"i18n"in e&&n(0,h=e.i18n),"database"in e&&n(39,p=e.database),"customEmoji"in e&&n(41,g=e.customEmoji),"customCategorySorting"in e&&n(42,b=e.customCategorySorting)},e.$$.update=()=>{if(1280&e.$$.dirty[1]&&g&&p&&n(39,p.customEmoji=g,p),1&e.$$.dirty[0]|256&e.$$.dirty[1]){async function e(){let e=!1;const t=setTimeout((()=>{e=!0,n(18,a=h.loadingMessage)}),1e3);try{await p.ready(),n(14,I=!0)}catch(e){console.error(e),n(18,a=h.networkErrorMessage)}finally{clearTimeout(t),e&&(e=!1,n(18,a=""))}}p&&e()}if(4096&e.$$.dirty[0]|1024&e.$$.dirty[1]&&(g&&g.length?n(12,D=[Ee,...xe]):D!==xe&&n(12,D=xe)),4&e.$$.dirty[0]&&_e((()=>{n(44,k=(w||"").trim()),n(5,$=-1)})),6144&e.$$.dirty[0]&&n(13,u=D[M]),24576&e.$$.dirty[0]|8192&e.$$.dirty[1]){async function e(){if(I){if(k.length>=2){const e=k,t=await async function(e){return q(await F(await p.getEmojiBySearchQuery(e)))}(e);e===k&&(n(1,y=t),n(4,j=!0))}else if(u){const e=u.id,t=await async function(e){if(void 0===e)return[];const t=-1===e?g:await p.getEmojiByGroup(e);return q(await F(t))}(e);e===u.id&&(n(1,y=t),n(4,j=!1))}}else n(1,y=[]),n(4,j=!1)}e()}if(4112&e.$$.dirty[0]&&n(22,l=`\n  --font-family: ${Te};\n  --num-groups: ${D.length}; \n  --indicator-opacity: ${j?0:1}; \n  --num-skintones: 6;`),16384&e.$$.dirty[0]|256&e.$$.dirty[1]){async function e(){I&&n(8,_=await p.getPreferredSkinTone())}e()}if(512&e.$$.dirty[1]&&n(9,C=Array(6).fill().map(((e,t)=>function(e,t){if(0===t)return e;const n=e.indexOf("‍");return-1!==n?e.substring(0,n)+String.fromCodePoint(127995+t-1)+e.substring(n):(e.endsWith("️")&&(e=e.substring(0,e.length-1)),e+"\ud83c"+String.fromCodePoint(57339+t-1))}(m,t)))),768&e.$$.dirty[0]&&n(21,c=C[_]),257&e.$$.dirty[0]&&n(23,L=h.skinToneLabel.replace("{skinTone}",h.skinTones[_])),16384&e.$$.dirty[0]|256&e.$$.dirty[1]){async function e(){n(45,d=(await Promise.all(Ce.map((e=>p.getEmojiByUnicodeOrName(e))))).filter(Boolean))}I&&e()}if(16384&e.$$.dirty[0]|49408&e.$$.dirty[1]){async function e(){const e=await p.getTopFavoriteEmoji(z),t=await q(Ue([...e,...d],(e=>e.unicode||e.name)).slice(0,z));n(10,T=t)}I&&d&&e()}if(10&e.$$.dirty[0]){const e=y.filter((e=>e.unicode)).filter((e=>Se(e)&&!De.has(e.unicode)));e.length?Re((()=>function(e){const t=o.getRootNode();!function(e,t,n){for(const o of e){const e=Fe(n(o));void 0===Oe&&(Oe=Fe(t));const i=e/1.8<Oe;De.set(o.unicode,i)}}(e,i,(e=>t.getElementById(`emo-${e.id}`))),n(1,y=y)}(e))):(n(1,y=y.filter(N)),Re((()=>{(r||{}).scrollTop=0})))}if(e.$$.dirty[0],e.$$.dirty[1],18&e.$$.dirty[0]|2048&e.$$.dirty[1]){function e(){if(j)return[{category:"",emojis:y}];const e=new Map;for(const t of y){const n=t.category||"";let o=e.get(n);o||(o=[],e.set(n,o)),o.push(t)}return[...e.entries()].map((([e,t])=>({category:e,emojis:t}))).sort(((e,t)=>b(e.category,t.category)))}n(15,v=e())}34&e.$$.dirty[0]&&n(26,f=-1!==$&&y[$].id),192&e.$$.dirty[0]&&(x?s.addEventListener("transitionend",(()=>{n(19,E=!0)}),{once:!0}):n(19,E=!1))},[h,y,w,r,j,$,x,s,_,C,T,M,D,u,I,v,o,i,a,E,S,c,l,L,A,B,f,R,(e,t)=>{return(n=[e.name||R(e,t),...e.shortcodes||[]],Ue(n,(e=>e))).join(", ");var n},function(e){return function(e,t){let n;return Ne?(n=new ResizeObserver((e=>t(e[0].contentRect.width))),n.observe(e)):Re((()=>t(e.getBoundingClientRect().width))),{destroy(){n&&n.disconnect()}}}(e,(t=>{{const i=getComputedStyle(o),r=parseInt(i.getPropertyValue("--num-columns"),10),a="rtl"===i.getPropertyValue("direction"),s=e.parentElement.getBoundingClientRect().width-t;n(46,z=r),n(25,B=s),n(24,A=a)}}))},function(e){if(!j||!y.length)return;const t=t=>{Ie(e),n(5,$=Pe(t,$,y))};switch(e.key){case"ArrowDown":return t(!1);case"ArrowUp":return t(!0);case"Enter":if(-1!==$)return Ie(e),V(y[$].id);y.length&&n(5,$=0)}},H,function(e){const{target:t,key:n}=e,o=t=>{t&&(Ie(e),t.focus())};switch(n){case"ArrowLeft":return o(t.previousSibling);case"ArrowRight":return o(t.nextSibling);case"Home":return o(t.parentElement.firstChild);case"End":return o(t.parentElement.lastChild)}},async function(e){const{target:t}=e;t.classList.contains("emoji")&&(Ie(e),V(t.id.substring(4)))},K,async function(e){n(6,x=!x),n(20,S=_),x&&(Ie(e),Re((()=>P(`skintone-${S}`))))},function(e){if(!x)return;const t=async t=>{Ie(e),n(20,S=t),await(fe(),de),P(`skintone-${S}`)};switch(e.key){case"ArrowUp":return t(Pe(!0,S,C));case"ArrowDown":return t(Pe(!1,S,C));case"Home":return t(0);case"End":return t(C.length-1);case"Enter":return K(e);case"Escape":return Ie(e),n(6,x=!1),P("skintone-button")}},function(e){if(x)return" "===e.key?K(e):void 0},async function(e){const{relatedTarget:t}=e;t&&O(t)||n(6,x=!1)},p,m,g,b,!0,k,d,z,function(){w=this.value,n(2,w)},function(e){se[e?"unshift":"push"]((()=>{s=e,n(7,s)}))},e=>H(e),function(e){se[e?"unshift":"push"]((()=>{r=e,n(3,r)}))},function(e){se[e?"unshift":"push"]((()=>{i=e,n(17,i)}))},function(e){se[e?"unshift":"push"]((()=>{o=e,n(16,o)}))}]}class at extends class{$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(q(n.on_destroy),n.fragment&&n.fragment.d(1),n.on_destroy=n.fragment=null,n.ctx=[])}(this),this.$destroy=O}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){super(),function(e,t,n,o,i,r,a,s=[-1]){const c=W;re(e);const l=e.$$={fragment:null,ctx:null,props:r,update:O,not_equal:i,bound:F(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:t.context||[]),callbacks:F(),dirty:s,skip_bound:!1,root:t.target||c.$$.root};a&&a(l.root);let d=!1;l.ctx=n?n(e,t.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return l.ctx&&i(l.ctx[t],l.ctx[t]=r)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](r),d&&function(e,t){-1===e.$$.dirty[0]&&(ae.push(e),fe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],l.update(),d=!0,q(l.before_update),l.fragment=!!o&&o(l.ctx),t.target&&(l.fragment&&l.fragment.c(),t.intro&&ve(e.$$.fragment),function(e,t,n,o){const{fragment:i,on_mount:r,on_destroy:a,after_update:s}=e.$$;i&&i.m(t,n),o||me((()=>{const t=r.map(N).filter(H);a?a.push(...t):q(t),e.$$.on_mount=[]})),s.forEach(me)}(e,t.target,t.anchor,t.customElement),ge()),re(c)}(this,e,rt,it,V,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42},null,[-1,-1,-1])}}var st={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading…",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const ct=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji"];class lt extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});const t=document.createElement("style");t.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover)and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}",this.shadowRoot.appendChild(t),this._ctx={locale:"en",dataSource:"https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",skinToneEmoji:"🖐️",customCategorySorting:ze,customEmoji:null,i18n:st,...e};for(const e of ct)"database"!==e&&Object.prototype.hasOwnProperty.call(this,e)&&(this._ctx[e]=this[e],delete this[e]);this._dbFlush()}connectedCallback(){this._cmp=new at({target:this.shadowRoot,props:this._ctx})}disconnectedCallback(){this._cmp.$destroy(),this._cmp=void 0;const{database:e}=this._ctx;e&&e.close().catch((e=>console.error(e)))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji"]}attributeChangedCallback(e,t,n){this._set(e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase())),n)}_set(e,t){this._ctx[e]=t,this._cmp&&this._cmp.$set({[e]:t}),["locale","dataSource"].includes(e)&&this._dbFlush()}_dbCreate(){const{locale:k,dataSource:j,database:$}=this._ctx;$&&$.locale===k&&$.dataSource===j||this._set("database",new class{constructor({dataSource:e="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",locale:t="en",customEmoji:n=[]}={}){this.dataSource=e,this.locale=t,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=B(n),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const e=this._db=await(t=this._dbName,g[t]||(g[t]=async function(e){const t=await new Promise(((t,c)=>{const l=indexedDB.open(e,1);p[e]=l,l.onupgradeneeded=e=>{e.oldVersion<1&&function(e){function t(t,n,o){const i=n?e.createObjectStore(t,{keyPath:n}):e.createObjectStore(t);if(o)for(const[e,[t,n]]of Object.entries(o))i.createIndex(e,t,{multiEntry:n});return i}t(o),t(n,"unicode",{[r]:["tokens",!0],[s]:[["group","order"]],[m]:["skinUnicodes",!0]}),t(i,void 0,{[a]:[""]})}(l.result)},y(t,c,l)}));return t.onclose=()=>w(e),t}(t)),g[t]);var t;!function(e,t){let n=b[e];n||(n=b[e]=[]),n.push(t)}(this._dbName,this._clear);const d=this.dataSource,u=await async function(e){return!await z(e,o,l)}(e);u?await async function(e,t){let[n,o]=await U(t);n||(n=await R(o)),await C(e,o,t,n)}(e,d):this._lazyUpdate=async function(e,t){let n,i=await async function(e){const t=await fetch(e,{method:"HEAD"});P(t,e);const n=t.headers.get("etag");return D(n),n}(t);if(!i){const e=await U(t);i=e[0],n=e[1],i||(i=await R(n))}await async function(e,t,n){const[i,r]=await Promise.all([c,l].map((t=>z(e,o,t))));return i===n&&r===t}(e,t,i)||(n||(n=(await U(t))[1]),await C(e,n,t,i))}(e,d)}async ready(){const e=async()=>(this._ready||(this._ready=this._init()),this._ready);await e(),this._db||await e()}async getEmojiByGroup(e){return t(e),await this.ready(),h(await async function(e,t){return v(e,n,u,((e,n,o)=>{const i=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);_(e.index(s),i,o)}))}(this._db,e)).map(M)}async getEmojiBySearchQuery(t){return e(t),await this.ready(),[...this._custom.search(t),...h(await T(this._db,t)).map(M)]}async getEmojiByShortcode(t){return e(t),await this.ready(),this._custom.byShortcode(t)||M(await async function(e,t){const o=await T(e,t);if(!o.length){const o=e=>(e.shortcodes||[]).includes(t.toLowerCase());return await async function(e,t){return v(e,n,u,((e,n,o)=>{let i;const r=()=>{e.getAll(i&&IDBKeyRange.lowerBound(i,!0),50).onsuccess=e=>{const n=e.target.result;for(const e of n)if(i=e.unicode,t(e))return o(e);if(n.length<50)return o();r()}};r()}))}(e,o)||null}return o.filter((e=>{const n=(e.shortcodes||[]).map((e=>e.toLowerCase()));return n.includes(t.toLowerCase())}))[0]||null}(this._db,t))}async getEmojiByUnicodeOrName(t){return e(t),await this.ready(),this._custom.byName(t)||M(await async function(e,t){return v(e,n,u,((e,n,o)=>E(e,t,(n=>{if(n)return o(n);E(e.index(m),t,(e=>o(e||null)))}))))}(this._db,t))}async getPreferredSkinTone(){return await this.ready(),await z(this._db,o,d)||0}async setPreferredSkinTone(e){return t(e),await this.ready(),n=this._db,i=e,v(n,o,f,((e,t)=>{e.put(i,"skinTone"),S(t)}));var n,i}async incrementFavoriteEmojiCount(t){return e(t),await this.ready(),n=this._db,o=t,v(n,i,f,((e,t)=>E(e,o,(n=>{e.put((n||0)+1,o),S(t)}))));var n,o}async getTopFavoriteEmoji(e){return t(e),await this.ready(),(await function(e,t,o){return 0===o?[]:v(e,[i,n],u,(([e,n],i,r)=>{const s=[];e.index(a).openCursor(void 0,"prev").onsuccess=e=>{const i=e.target.result;if(!i)return r(s);function a(e){if(s.push(e),s.length===o)return r(s);i.continue()}const c=i.primaryKey,l=t.byName(c);if(l)return a(l);E(n,c,(e=>{if(e)return a(e);i.continue()}))}}))}(this._db,this._custom,e)).map(M)}set customEmoji(e){this._custom=B(e)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch(e){}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await w(this._dbName)}async delete(){var e;await this._shutdown(),await(e=this._dbName,new Promise(((t,n)=>{w(e),y(t,n,indexedDB.deleteDatabase(e))})))}}({locale:k,dataSource:j}))}_dbFlush(){Promise.resolve().then((()=>this._dbCreate()))}}const dt={};for(const e of ct)dt[e]={get(){return"database"===e&&this._dbCreate(),this._ctx[e]},set(t){if("database"===e)throw new Error("database is read-only");this._set(e,t)}};Object.defineProperties(lt.prototype,dt),customElements.define("emoji-picker",lt);const ut=lt;let ft="😋",mt=document.getElementById("emoji-picker-container");const ht=new ut({dataSource:"./data.json"});ht.classList.add("dark"),mt.appendChild(ht);let pt=document.querySelector("emoji-picker"),gt=document.getElementById("current-emoji"),bt=document.getElementById("result-input"),yt=document.querySelectorAll(".grid-item"),vt=document.querySelector(".grid-container");gt.innerHTML=ft,pt.addEventListener("emoji-click",(function(e){ft=e.detail.unicode,gt.innerHTML=ft}));let wt=!1;function kt(){let e="";yt.forEach((function(t){e+=t.innerHTML})),bt.value=e}vt.addEventListener("mouseleave",(function(e){wt=!1})),yt.forEach((function(e){e.addEventListener("mousedown",(function(t){wt=!0,e.innerHTML=ft,kt()})),e.addEventListener("mouseup",(function(e){wt=!1,kt()})),e.addEventListener("mouseover",(function(t){wt&&(e.innerHTML=ft,kt())})),e.addEventListener("click",(function(t){e.innerHTML=ft,wt=!1,kt()}))}));let jt=document.getElementById("toggle"),$t=document.querySelector("body"),xt=document.querySelectorAll("h2"),Et=document.querySelector(".fa-github-square");function _t(e,t,...n){n.forEach((function(n){n.classList.remove(e),n.classList.add(t)}))}let St=localStorage.getItem("theme"),Lt=!0;"light"===St&&(Lt=!1,_t("dark","light",jt,$t,pt,Et,...xt)),jt.addEventListener("click",(function(){Lt?(_t("dark","light",jt,$t,pt,Et,...xt),localStorage.setItem("theme","light")):(_t("light","dark",jt,$t,pt,Et,...xt),localStorage.setItem("theme","dark")),Lt=!Lt}))})();